/*******************************************************************************************
*
*   HEADER:
*       util.h
*
*   DESCRIPTION:
*       This provides utility macros.
*
*   Created by Seongkwan Lee on Oct 27, 2020
*
******************************************************************************************/

#ifndef UTIL_H_
#define UTIL_H_

/*-----------------------------------------------------------------------------------------
                                    GENERAL INCLUDES
-----------------------------------------------------------------------------------------*/

#include <stdint.h>

#include "msp.h"
#include "math.h"

/*-----------------------------------------------------------------------------------------
                                  DESIGN ASSURANCE LEVEL
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                         MACROS
-----------------------------------------------------------------------------------------*/

#define _BV(bit) ( 0x01 << bit )

#define sbo(port,bit) port->DIR |= _BV( bit )
#define sbi(port,bit) port->DIR &= ~_BV( bit )

#define out_bit_on(port,bit)  port->OUT |= _BV( bit )
#define out_bit_off(port,bit) port->OUT &= ~_BV( bit )

#define read_bit(port,bit) ( port->IN & _BV( bit ) )

#define alt(port,bit)  port->SEL0 |= _BV( bit );  port->SEL1 &= ~_BV( bit )
#define gpio(port,bit) port->SEL0 &= ~_BV( bit ); port->SEL1 &= ~_BV( bit )

#define REDLED   ( *( ( volatile uint8_t * )( 0x42098060 ) ) )
#define GREENLED ( *( ( volatile uint8_t * )( 0x42098064 ) ) )
#define BLUELED  ( *( ( volatile uint8_t * )( 0x42098068 ) ) )

#define abs(x)          ( ( x > 0 )? x: -x )

/*-----------------------------------------------------------------------------------------
                                    LITERAL CONSTANTS
-----------------------------------------------------------------------------------------*/

#define TRUE  1
#define FALSE 0

/*-----------------------------------------------------------------------------------------
                                         TYPES
-----------------------------------------------------------------------------------------*/

typedef uint8_t boolean;

/*-----------------------------------------------------------------------------------------
                                     PROJECT INCLUDES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                     MEMORY CONSTANTS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                        VARIABLES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                        PROCEDURES
-----------------------------------------------------------------------------------------*/

#endif /* UTIL_H_ */
