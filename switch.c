/******************************************************************************************
*
*   MODULE:
*       switch.c
*
*   DESCRIPTION:
*       This includes procedures for switches.
*
*   Created by Seongkwan Lee on Oct 27, 2020
*
******************************************************************************************/

/*-----------------------------------------------------------------------------------------
                                     GENERAL INCLUDES
-----------------------------------------------------------------------------------------*/

#include "switch.h"
#include "util.h"

/*-----------------------------------------------------------------------------------------
                                  DESIGN ASSURANCE LEVEL
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                         MACROS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                    LITERAL CONSTANTS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                           TYPES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                     PROJECT INCLUDES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                     MEMORY CONSTANTS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                        VARIABLES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                       PROCEDURES
-----------------------------------------------------------------------------------------*/

// built-in LED1 connected to P1.0
// negative logic built-in Button 1 connected to P1.1
// negative logic built-in Button 2 connected to P1.4
// positive logic switch connected to P1.5
// built-in red LED connected to P2.0
// built-in green LED connected to P2.1
// built-in blue LED connected to P2.2

/********************************************************************
*
*   PROCEDURE NAME:
*       switch_init
*
*   DESCRIPTION:
*       Initialize GPIO Port 1 bit 5 for input. An external pull-down
*       resistor is used.
*
********************************************************************/

void switch_init
    (
    void
    )
{
/*---------------------------------------------------------
Configure P1.5 as GPIO
---------------------------------------------------------*/
P1->SEL0 &= ~0x20;
P1->SEL1 &= ~0x20;

/*---------------------------------------------------------
Make P1.5 in
---------------------------------------------------------*/
P1->DIR  &= ~0x20;

/*---------------------------------------------------------
Disable pull resistor on P1.5
---------------------------------------------------------*/
P1->REN  &= ~0x20;

}   /* switch_init() */


/********************************************************************
*
*   PROCEDURE NAME:
*       switch_read
*
*   DESCRIPTION:
*       Read and return the status of GPIO Port 1 bit 5.
*
********************************************************************/

uint32_t switch_read
    (
    void
    )
{
/*---------------------------------------------------------
Read P1.5 input and return 0x20(pressed) or 0(not pressed)
---------------------------------------------------------*/
return ( P1->IN & 0x20 );

}

/********************************************************************
*
*   PROCEDURE NAME:
*       switch_2_read
*
*   DESCRIPTION:
*       Read and return the status of switch 2.
*
********************************************************************/
uint32_t switch_2_read
    (
    void
    )
{
/*---------------------------------------------------------
Local Constants
---------------------------------------------------------*/
#define P15IN ( *( ( volatile uint8_t * )( 0x42098014 ) ) )

/*---------------------------------------------------------
0x01 if pressed, 0x00 if not pressed
---------------------------------------------------------*/
return( P15IN );

}   /* switch_read() */



