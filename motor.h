/******************************************************************************************
*
*   HEADER NAME:
*       motor.h
*
*   DESCRIPTION:
*       This includes headers for motor related procedures.
*
*   Created by Seongkwan Lee on Oct 27, 2020
*
******************************************************************************************/

#ifndef MOTOR_H_
#define MOTOR_H_

/*-----------------------------------------------------------------------------------------
                                     GENERAL INCLUDES
-----------------------------------------------------------------------------------------*/

#include "interrupt.h"
#include "pwm.h"
#include "util.h"

/*-----------------------------------------------------------------------------------------
                                  DESIGN ASSURANCE LEVEL
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                         MACROS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                    LITERAL CONSTANTS
-----------------------------------------------------------------------------------------*/

#define PERIOD_VALUE 15000  /* Initial PWM period value */
#define INITIAL_DUTY 0      /* Initial duty cycle       */

/*-----------------------------------------------------------------------------------------
                                           TYPES
-----------------------------------------------------------------------------------------*/

typedef uint8_t motor_side_t;
enum
    {
    MOTOR_LEFT,             /* Left motor               */
    MOTOR_RIGHT             /* Right motor              */
    };

/*-----------------------------------------------------------------------------------------
                                     MEMORY CONSTANTS
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                        VARIABLES
-----------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------
                                       PROCEDURES
-----------------------------------------------------------------------------------------*/

/*---------------------------------------------------------
motor.c procedures.
---------------------------------------------------------*/

void motor_init
    (
    void
    );

void motor_stop
    (
    void
    );

void motor_move_forward
    (
    uint16_t            leftDuty,   /* Duty cycle of left motor    */
    uint16_t            rightDuty   /* Duty cycle of right motor   */
    );

void motor_run
    (
    motor_side_t        motor_side,/* Motor side to run            */
    int16_t             duty       /* Duty cycle of the motor      */
    );

void motor_move_with_forward_and_turn
    (
    int16_t             x,         /* Linear speed                 */
    int16_t             turn       /* Angular speed                */
    );

#endif /* MOTOR_H_ */
